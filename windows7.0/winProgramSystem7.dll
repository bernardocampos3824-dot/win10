@echo off
setlocal enabledelayedexpansion

:: ==============================================================================
:: WIN7 LEGACY HUB - PRIMARY KERNEL VALIDATOR (.ASI PARENT SYSTEM)
:: ==============================================================================

:: 1. DEFINIรรO DE VARIรVEIS DE SISTEMA (CAMADAS DE PROTEรรO)
set "SYS_PATH=C:\Windows 7.0"
set "ENGINE_NAME=core_engine.asi"
set "CHILD_LOGIC=hub_system.dll"
set "REG_KEY=HKCU\Software\Win7LegacyHub"
set "LOG_CHECK=%temp%\sys_validate.tmp"

:: 2. VERIFICAรรO INICIAL DO DIRETรRIO RAIZ
if not exist "%SYS_PATH%" (
    set "ERR_CODE=0x001_PATH_NOT_FOUND"
    goto :system_shutdown
)

:: 3. VALIDAรรO DO "PAI" (.ASI) - CHECAGEM DE ASSINATURA INTERNA
echo [STATUS] Verificando integridade do Core Engine...
findstr /c:"SIGNED_BY_ADMIN_HUB_LEGACY_VERSION_7" "%SYS_PATH%\%ENGINE_NAME%" >nul 2>&1
if %errorlevel% neq 0 (
    set "ERR_CODE=0x002_INVALID_PARENT_SIGNATURE"
    goto :system_shutdown
)

:: 4. VALIDAรรO DA "FILHA" (.DLL) - CHECAGEM DE ATRIBUTOS
attrib "%SYS_PATH%\%CHILD_LOGIC%" | findstr /i "H" >nul
if %errorlevel% neq 0 (
    :: Se a DLL nรฃo estiver oculta, o sistema entende como violaรงรฃo de seguranรงa, bรช!
    set "ERR_CODE=0x003_DLL_TAMPERING_DETECTED"
    goto :system_shutdown
)

:: 5. CONEXรO COM O REGISTRO DO WINDOWS (A ALMA DO PROGRAMA)
reg query "%REG_KEY%" /v "KernelID" >nul 2>&1
if %errorlevel% neq 0 (
    set "ERR_CODE=0x004_REGISTRY_KEY_MISSING"
    goto :system_shutdown
)

:: 6. VERIFICAรรO DE HARDWARE (Complexidade Mรกxima, Brother!)
echo [STATUS] Sincronizando com o Processador...
wmic cpu get processorid > "%LOG_CHECK%"
findstr /v "ProcessorId" "%LOG_CHECK%" >nul
if %errorlevel% neq 0 (
    set "ERR_CODE=0x005_HARDWARE_SYNC_FAILED"
    goto :system_shutdown
)

:: 7. VERIFICAรรO DE DISCO (PROTEรรO CONTRA CรPIA PIRATA)
vol C: > "%LOG_CHECK%"
if %errorlevel% neq 0 (
    set "ERR_CODE=0x006_DISK_SERIAL_UNREADABLE"
    goto :system_shutdown
)

:: 8. FINALIZAรรO DO BOOT (TUDO OK!)
del "%LOG_CHECK%"
cls
echo.
echo [92m[SUCCESS] SISTEMA AUTORIZADO PELO NรCLEO .ASI[0m
echo [92m[SUCCESS] BEM-VINDO AO WIN7 LEGACY HUB, BROTHER![0m
timeout /t 2 >nul
goto :start_main_hub

:system_shutdown
cls
color 0C
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo โ             CRITICAL ERROR: SYSTEM ARCHITECTURE COLLAPSE           โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
echo โ ERRO FATAL: %ERR_CODE%                                 
echo โ                                                                    โ
echo โ O ARQUIVO PAI (.ASI) DETECTOU UMA FALHA NA CONEXรO COM A DLL OU    โ
echo โ NA PASTA "Windows 7.0". O PROCESSO FOI ABORTADO.                   โ
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo [!] O Windows 7 impediu a execucao por falta de integridade.
echo [!] Fale com o desenvolvedor, Brother.
pause
exit

:start_main_hub
:: Aqui entra o seu cรณdigo principal com o menu e as cores de arco-รญris!